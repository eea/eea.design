<metal:entry define-macro="entry">
  <div tal:define="
      css python:brain.is_folderish and 'photoAlbumEntry photoAlbumFolder' or 'photoAlbumEntry';
      video python:'video-fancybox' if is_video and obj.portal_type != 'FlashFile' else '';
      animation python:'animation-fancybox' if is_video and obj.portal_type == 'FlashFile' else '';"
    tal:attributes="class css">
    <a tal:attributes="
      href listing_url;
      alt obj/pretty_title_or_id;
      class python:video or animation">
      <span class="photoAlbumEntryWrapper">
      <img style="border: none" tal:attributes="
        title desc_or_title;
        alt obj/pretty_title_or_id;
        src string:${obj/absolute_url}/image_thumb"/>
      </span>
      <span class="photoAlbumEntryTitle" tal:content="obj/pretty_title_or_id" />
      <span class="photoAlbumEntryDescription" tal:content="python: obj.Description() or obj.aq_parent.Description()" tal:condition="here/main_template/macros/short_colophon" />
    </a>
  </div>
</metal:entry>
