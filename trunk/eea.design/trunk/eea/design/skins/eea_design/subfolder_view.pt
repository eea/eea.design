<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<body>
    <div metal:fill-slot="main">
    <metal:main-macro define-macro="main" tal:define="view here/@@subfolder_view_logic">
        <h1 tal:content="object_title" class="documentFirstHeading">
            Title or id
        </h1>

        <div metal:use-macro="here/document_actions/macros/document_actions">
            Document actions (print, sendto etc)
        </div>

        <div class="visualClear"></div>

        <p class="documentDescription"
           tal:content="here/Description"
           tal:condition="here/Description">
            Description
        </p>

        <div class="visualClear"></div>

        <tal:block tal:define="size_limit python:10">
            <div class="subfolder" tal:repeat="folder python:view.folder_contents(size_limit)">
                <h2 tal:content="folder/title">Articles</h2>
                <p tal:content="folder/description"></p>
                <div tal:define="folderContents folder/contents">
                    <div class="photoAlbumEntry"
                         tal:attributes="class python:item['portal_type'] == 'EyewitnessStory' and 'photoAlbumEntry photoAlbumFolder' or 'photoAlbumEntry'"
                         tal:repeat="item folderContents">
                         <a tal:attributes="href item/url;
                                            title item/description;
                                            class python:item['portal_type'] == 'EyewitnessStory' and 'gallery-fancybox' or ''">
                            <span class="photoAlbumEntryWrapper">
                                <img tal:attributes="src string:${item/url}/image_thumb"/>
                            </span>
                            <span class="photoAlbumEntryTitle" tal:content="item/title"></span>
                        </a>
                    </div>
                </div>
                <div class="visualClear"></div>
                <a class="moreLink" tal:condition="folder/has_more" i18n:translate="box_morelink" tal:attributes="href folder/url">Read more</a>
            </div>
        </tal:block>

    </metal:main-macro>
    </div>
</body>
</html>
