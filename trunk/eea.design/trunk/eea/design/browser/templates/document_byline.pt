<tal:docByLine metal:define-macro="byline">
<div class="documentByLine"
    id="plone-document-byline"
    tal:define="isAnon context/@@plone_portal_state/anonymous;
    plone_view context/@@plone;
    siteprops context/portal_properties/site_properties;"
    i18n:domain="eea">
    <tal:loggedin tal:condition="not: isAnon">
    <span id="lock-icon"
        title="This document is locked."
        tal:define="lock_icon view/locked_icon"
        tal:condition="python:lock_icon">
        <img tal:replace="structure lock_icon" />
    </span>

    <tal:creator tal:define="creator_short_form view/creator;"
    tal:condition="creator_short_form">
    <tal:name tal:define="creator_long_form string:?author=${creator_short_form};
    creator_is_openid python:'/' in creator_short_form;
    creator_id python:(creator_short_form, creator_long_form)[creator_is_openid];">
    <span>
        <tal:i18n i18n:translate="label_by_author">
        by
        <a href="#"
            tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/author/${creator_id}"
            tal:content="view/authorname"
            tal:omit-tag="python:view.author() is None"
            i18n:name="author">Roland Barthes</a>
        </tal:i18n>
    </span>
    —
    </tal:name>
    </tal:creator>
    <span i18n:translate="box_last_modified">
        last modified
    </span>
    <span tal:replace="python:view.toLocalizedTime(context.ModificationDate(),long_format=1)">
        August 16, 2001 at 23:35:59
    </span>

    <tal:expired tal:condition="view/isExpired">
    —
    <span class="state-expired"
        i18n:translate="time_expired">expired</span>
    </tal:expired>

    <span class="contentHistory" id="content-history"
        tal:condition="view/show_history">
        —
        <a href="#"
            tal:attributes="href string:${here/absolute_url}/@@historyview"
            i18n:translate="label_history">History</a>
    </span>
    <div 
        tal:define="contributors context/Contributors"
        tal:condition="contributors"
        i18n:translate="text_contributors">
        Contributors:
        <span i18n:name="name"
            tal:omit-tag=""
            tal:content="python: ', '.join(contributors)">
            Mary
        </span>
    </div>

    <tal:rights tal:define="rights context/Rights"
    tal:condition="rights">
    <div tal:replace="rights">
        Copyleft NiceCorp Inc.
    </div>
    </tal:rights>
    </tal:loggedin>

    <tal:anonymous  tal:define="metatypes_showpubdate siteprops/metatypes_showpubdate|python:['Highlight','PressRelease','Article','Speech','Assessment','Specification'];
                                metatypes_showmoddate siteprops/metatypes_showmoddate|python:['ATDocument','Highlight','PressRelease','Article','Speech','Assessment','Specification'];
                                metatypes_showcredate siteprops/metatypes_showcredate|python:['Assessment','Specification'];" 
                    tal:condition="isAnon" metal:define-macro="publishdate">                    
       <span class="docDate creationDate" tal:condition="python:context.meta_type in metatypes_showcredate">
         <tal:published  i18n:translate="Published">Created</tal:published>: 
         <span tal:replace="python:plone_view.toLocalizedTime(here.CreationDate())">
           August 16, 2001 at 23:35:59</span>
       </span>
       <span class="docDate publishDate" tal:condition="python:context.meta_type in metatypes_showpubdate">
         <tal:published  i18n:translate="Published">Published</tal:published>: 
         <span tal:replace="python:plone_view.toLocalizedTime(here.getEffectiveDate())">
           August 16, 2001 at 23:35:59</span>
       </span>
       <span class="docDate modificationDate" tal:condition="python:context.meta_type in metatypes_showmoddate">
         <tal:modified  i18n:translate="">Last modified</tal:modified>: 
         <span tal:replace="python:plone_view.toLocalizedTime(here.ModificationDate())">
          August 16, 2001 at 23:35:59</span>
       </span>
    </tal:anonymous>
</div>
</tal:docByline>
