<tal:block tal:define="foo python:request.set('disable_plone.leftcolumn', 1);
            bar python:request.set('disable_plone.rightcolumn', 1);"/>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      i18n:domain="eea"
      metal:use-macro="context/main_template/macros/master">
    <head>

    </head>
    <body>

    <div metal:fill-slot="main">

        <h1 class="hiddenStructure" tal:content="context/Title">EEA Home page</h1>
        <tal:main-macro metal:define-macro="main">
            <div id="highlights-block" tal:define="global frontpage_view context/@@frontpage_highlights;">
                <tal:promos condition="python:request.get('LANGUAGE','en') == 'en'">
                    <div id="top-news-area">
                        <metal:promotions use-macro="here/portlet_promotions/macros/hardcoded_promotions" />
                    <div class="visualClear"><!-- &nbsp; --></div>
                    </div>
                </tal:promos>
                <div id="main-content">
                    <div class="visualClear"><!-- &nbsp; --></div>
                    <div id="articles-area" class="column-area">
                        <div metal:use-macro="context/spotlight_film_macros/macros/spotlight">
                            Spotlight
                        </div>
                        <h2 class="column-title" i18n:domain="eea" i18n:translate="Articles">Featured articles</h2>
                        <div metal:use-macro="here/frontpage_macros/macros/highArticles">
                            Top articles
                        </div>
                        <div class="portletFooter">
                            <p><a href="articles" title="archive" class="moreLink" i18n:attributes="title" i18n:translate="archive">archive</a></p>
                        </div>
                    </div>

                    <div id="highlights-area" class="column-area">
                        <div id="news-header">
                        <h2> What's new</h2>
                        <!-- select_topics -->
                        <select tal:define="items python:here.portal_vocabularies.getVocabularyByName('themes').getVocabularyLines()" id="topic-selector">
                            <option value="">Filter by topic</option>
                            <tal:items tal:repeat="item items">
                                <option  
                                        tal:define="value python: item[0];"
                                        tal:attributes="value value;"
                                        tal:content="python: item[1]" />
                            </tal:items>
                        </select>
                        </div>
                        <!-- end select_topics -->

                        <!-- tabs -->
                        <ul id="tabs"
                            tal:define="tabnames  python: ['News', 'Articles', 'Publications', 'Multimedia', 'Data and maps'];">
                            <li tal:repeat="tab tabnames">
                                <a href="#"  tal:content="tab" class="block" tal:attributes="id python: 'tab-datamaps' if tab == 'Data and maps' else 'tab-' + tab.lower()">Tabs</a>
                            </li>
                        </ul>
                        <!-- end_tabs -->

                        <div metal:use-macro="here/frontpage_macros/macros/high">
                            Top Highlights
                        </div>
                        <div metal:use-macro="here/frontpage_macros/macros/middle">
                            Middle Highlights
                        </div>

                        <div metal:use-macro="here/frontpage_macros/macros/middle-short">
                            Middle Highlights
                        </div>
                        <div class="visualClear"><!-- &nbsp; --></div>
                        <div class="portletFooter">
                             <p><a href="highlights" title="archive" class="moreLink" i18n:attributes="title" i18n:translate="archive">archive</a></p>
                        </div>
                    </div>
                    <div class="visualClear"><!-- &nbsp; --></div>
                </div>
                <tal:tooltip-script tal:replace="structure context/spotlight_film_design_fastedit"/>
            </div>

            <script type="text/javascript">
                jQuery(function() { 
                    var tabs = jQuery("#highlights-middle").tabs("#highlights-middle div.highlightMiddle", {tabs: 'div.panel', effect: 'slide'});
                    jQuery("ul#tabs").tabs("> .highlights");
                    jQuery("#topic-selector").change(
                    function displayResult()
                    {
                        var x=document.getElementById("topic-selector").selectedIndex;
                        var y=document.getElementById("topic-selector").options;
                        var sel_value = y[x].value;
                        var cur_tab_val = $("#tabs a.current").text();
                        var all_news = jQuery(".highlights:visible");
                        var news = all_news.each(function() 
                            {
                               var container = $(this);
                               if( container.css("display") == "block")
                               {
                                    return container;
                               }
                            });
                        var address = "http://localhost:8081/www/SITE/ajax?topic=";
                        jQuery(news).load( address + sel_value + ";tab=" + cur_tab_val, function() {
                            tabs;

                        });
                    }
                    );

                });
            </script>
        </tal:main-macro>
    </div>

    </body>
</html>

