<metal:promos metal:define-macro="portlet"
                tal:define="
                highlights python: view.get_promotions();
                frontpage_gallery frontpage|nothing;
                small_factor python: '' if frontpage_gallery else '-sm';"
                tal:condition="highlights">

<div id="promo-gallery-wrapper">
<div tal:attributes="id string:gallery-content-outer${small_factor};"> 
  <ul tal:attributes="id string:promo-gallery-content${small_factor}"> 
      <metal:pritems  
                    tal:repeat="hl highlights">
                        <li>
                        <tal:image tal:define="figure hl/getImage|nothing;
                        figure_link hl/getUrl|hl/absolute_url|nothing;
                        figure_scale string: preview;
                        figure_title figure/title|nothing;"
                        tal:condition="figure">
                        <tal:Link tal:condition="figure_link">
                            <a href="" title="" class="noPrint"
                               tal:attributes="href figure_link|nothing;
                               title figure_title;">
                            <img alt="" tal:attributes="src string:${hl/absolute_url}/image_preview; title figure/title; alt figure/title" />
                         </a>
                         </tal:Link>
                        <tal:noLink tal:condition="not: figure_link">
                            <img alt="" tal:attributes="src string:${hl/absolute_url}/image_preview; title figure/title; alt figure/title" />
                        </tal:noLink>
                        </tal:image>
                    <div tal:attributes="class string:promo-item-desc${small_factor};">
                        <h3><a href="#" class="noPrint"
                                tal:attributes="href hl/getUrl|hl/absolute_url|nothing"
                                tal:content="hl/title">
                                Highlight Title</a></h3>
                    <tal:desc tal:condition="frontpage_gallery">
                      <span tal:define="description hl/Description|string: Description goes here" tal:content="python:plone_view.cropText(description,122)" />   
                    </tal:desc>  
                    </div>
                        </li>    
        </metal:pritems>
    </ul> 
    </div>

<!-- navigation outer -->

<div id="navigator-outer">
    <ul tal:attributes="id string:promo-navigator${small_factor}"> 
  <metal:items  define-macro="middlenews-promo"
                tal:condition="highlights"
                tal:repeat="hl highlights">
                    <li>
                        <div>
                        <tal:image tal:define="figure hl/getImage|nothing;
                        figure_scale string:thumb;
                        figure_title figure/title|nothing;"
                        tal:condition="figure">
                            <img alt="" tal:attributes="src string:${hl/absolute_url}/image_thumb; title figure/title; alt figure/title" />
                        </tal:image>

                        <tal:title tal:condition="frontpage_gallery">
                            <h3 tal:content="hl/Title">Highlight Title</h3>
                        </tal:title>
                    </div>
                    </li>
  </metal:items>
        </ul>
    </div>
    <div class="controls">
        <a  href="#" id="next-promo"></a>
        <a  href="#" id="prev-promo"></a>
        <a  href="#" id="play-pause" title="Pause slideshow" class="pause disabled" aria-pressed="true" role="button">Pause</a>
    </div>

</div>
 <!--end promotion_gallery macro -->
</metal:promos>

