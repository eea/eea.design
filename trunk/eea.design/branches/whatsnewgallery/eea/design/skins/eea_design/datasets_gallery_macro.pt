<tal:defines tal:define="datamaps_view context/@@data_and_maps_logic;">

<metal:datasets tal:condition="python: not request.get('AllLanguages')">
    <tal:datasets metal:define-macro="datasets"
                      tal:define="language python:request.get('Language');
                                      folderContents python: datamaps_view.getLatestDatasets() if not language else datamaps_view.getLatestDatasets(language=language);
                                      plone_view nocall:plone_view|context/@@plone;
                                      ajax python:True">
        <div metal:use-macro="here/frontpage_macros/macros/gallery-condition" />
    </tal:datasets>
</metal:datasets>

<metal:languages tal:condition="python:request.get('AllLanguages')">
    <tal:defines
            tal:define="languages python:datamaps_view.getResultsInAllLanguages('getLatestDatasets')">
        <metal:results use-macro="here/articles_gallery_macro/macros/noresults" />
    </tal:defines>
</metal:languages>

</tal:defines>
